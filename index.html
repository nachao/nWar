<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>nWar</title>
		<style>

			body{ font-family: 'Segoe UI Light','Segoe UI','Microsoft Jhenghei','微软雅黑',sans-serif; }

			/* 宫格 */
			.swipepad{
				margin: 0 auto;
				position: relative;
			}
			.swipepad-item{
				width: 50%;
				height: 50%;
				margin: 25% 0 0 25%;
				background-color: #eee;
				border-radius: 3px;
				position: relative;
			}
			.swipepad-item:hover{
				background-color: #ddd;
			}
			.swipepad .swipepad-temp{
				/*background-color: #eee;*/
				position: absolute;
			}
			.swipepad .swipepad-temp:hover{
				/*background-color: #ddd;*/
			}
			.swipepad .swipepad-template{
				display: none;
			}
			.swipepad-contain{
				display: none;
				width: 100%;
				height: 100%;
				position: relative;
			}
			.swipepad-owner{
				display: inline-block;
				line-height: 24px;
				transform: rotate(270deg);
				transform-origin: top left;
				position: absolute;
				top: 100%;
				left: -24px;
				width: 100%;
				white-space: nowrap;
				text-overflow: ellipsis;
				overflow: hidden;
				text-align: right;
				font-size: 12px;
			}
			.swipepad-text{
				display: none;
				text-align: center;
				line-height: 50px;
				margin: 0 50px;
				position: relative;
			}
			.swipepad-name{
				text-decoration: none;
				color: black;
				font-size: 20px;
			}
			.swipepad-up{
				text-decoration: none;
				display: inline-block;
				position: absolute;
				right: 0px;
				opacity: 0.4;
			}
			.swipepad-up span{
				font-size: 24px;
			}
			.swipepad-up:hover{
				opacity: 0.8;
			}
			.swipepad-active .swipepad-contain{
				display: inline-block;
			}
			.swipepad-active .swipepad-text{
				display: block;
			}


			/* 元素功能 */
			.nexpand{
				/*width: 100px;*/
				/*height: 100px;*/
				/*line-height: 100px;*/
				/*margin: 100px;*/
				/*background-color: #aaa;*/
				/*border-radius: 50%;*/
				/*cursor: pointer;*/
				/*color: white;*/
				/*text-align: center;*/
				/*position: relative;*/
			}
			.nexpand-btns {
				width: 50px;
				height: 100px;
				border-radius: 3px;
				display: none;
				float: right;
				margin-right: -50px;
			}

			.nexpand-btn{
				display: inline-block;
				line-height: 18px;
				font-size: 12px;
				border-radius: 3px;
				background-color: #737373;
				text-decoration: none;
				font-style: normal;
				color: white;
				padding: 0 10px;
				float: left;
				margin: 0 0 9px 5px;
				font-family: Arial;
			}
			.nexpand-btn:hover{
				background-color: #666;
			}


			/* 自增 */
			.growups-value{
				width: 100px;
				height: 100px;
				line-height: 100px;
				color: white;
				text-align: center;
				position: absolute;
				z-index: 2;	
				font-size: 33px;
				opacity: 0.7;
			}
			.growups-value:hover{
				opacity: 0.8;
			}

			.growups-act{
				/*background-color: #CF000D;*/
			}



			/* 图标 */
			@font-face {font-family: "iconfont";
			  src: url('font/iconfont.eot'); /* IE9*/
			  src: url('font/iconfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
			  url('font/iconfont.woff') format('woff'), /* chrome, firefox */
			  url('font/iconfont.ttf') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/
			  url('font/iconfont.svg#iconfont') format('svg'); /* iOS 4.1- */
			}

			.iconfont {
			  font-family:"iconfont" !important;
			  font-size:16px;
			  font-style:normal;
			  -webkit-font-smoothing: antialiased;
			  -webkit-text-stroke-width: 0.2px;
			  -moz-osx-font-smoothing: grayscale;
			}
			.icon-target:before { content: "\e61c"; }
			.icon-shengji:before { content: "\e609"; }
			.icon-target1:before { content: "\f0006"; }


		</style>
	</head>
	<body>

		<div class="swipepad" id="swipepad">
			<div class="swipepad-template" id="swipepad-template">
				<div class="swipepad-item">
					<div class="growups-value"></div>
					<div class="swipepad-contain nexpand-contain">
						<span class="swipepad-owner"></span>
					</div>
				</div>
				<div class="swipepad-text">
					<a class="swipepad-name" href="#">1</a>
					<a class="swipepad-up expand-up" href="#" title="upgrade."><span class="iconfont icon-shengji"></span></a>
				</div>
			</div>
		</div>


		<script src="jquery-1.11.0.min.js" ></script>
		<script src="narray-0.3.min.js" ></script>
		<script src="vue.js" ></script>
		<script src="./lib/4.growup.js" ></script>		<!-- 自增 -->
		<script src="./lib/5.swipepad.js" ></script>	<!-- 宫格 -->
		<script src="./lib/6.expand.js" ></script>		<!-- 元素功能 -->
		<script>

			var swipepad = new nW5(),
				expand = new nW6(),
				growup = new nW4();

			var datas = [];



			// 创建布局
			datas = swipepad.create();

			// 随机拥有者位置
			swipepad.owner({
				name: 'Na Chao',
				color: '#CF000D'
			});	

			// 绑定所有已被拥有的元素，自增
			growup.bind(datas);

			// 绑定功能
			expand.bind(datas);

			// 绑定对应的点击事件
			expand.click(function(id, type){
				var data = datas.$get('id='+ id)[0];

				if ( type == 'up' ) {
					expand.up(id, function(){
						$(data.el).find('.swipepad-name').html(data.value);
						growup.start(id);
					});
				}

			});

			// 设置所有被占用的，默认为1
			datas.$get('remark!=').$update(expand.rule[0]);

			// 设置所有被占用的，自增初始化和开始
			$.each(datas, function(i, data){
				data.number = 0;
				[data].$update(expand.rule[0]);
				data.el.find('.growups-value').click(function(){

					// 拥有者位置
					swipepad.owner({
						name: 'Na Chao',
						color: '#CF000D'
					}, data.id);
					growup.start(data.id);
				});
			});

			// 设置所有被占用的，自增初始化和开始
			$.each(datas.$get('remark!='), function(i, data){
				data.number = 0;
				growup.start(data.id);
			});
			


		</script>
	</body>
</html>